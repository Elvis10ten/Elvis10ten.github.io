{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/2022-09-08-hardware-new-software","result":{"data":{"post":{"__typename":"MdxPost","slug":"/2022-09-08-hardware-new-software","title":"Hardware is the new Software — Paper Summary","date":"08.09.2022","tags":[{"name":"summary","slug":"summary"},{"name":"paper","slug":"paper"},{"name":"hardware","slug":"hardware"}],"description":null,"canonicalUrl":"https://elvischidera.com/2022-09-08-hardware-new-software/","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Hardware is the new Software — Paper Summary\",\n  \"slug\": \"/2022-09-08-hardware-new-software\",\n  \"date\": \"2022-09-08T00:00:00.000Z\",\n  \"canonicalUrl\": \"https://elvischidera.com/2022-09-08-hardware-new-software/\",\n  \"banner\": \"./assets/banner.jpeg\",\n  \"tags\": [\"summary\", \"paper\", \"hardware\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Today's summary is about a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.microsoft.com/en-us/research/wp-content/uploads/2017/05/baumann-hotos17.pdf\"\n  }), \"paper\"), \" written by Andrew Baumann (Microsoft Research) in 2017.\"), mdx(\"hr\", null), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Moore\\u2019s Law may be slowing, but, perhaps as a result, other measures of processor complexity are (rapidly) acceler\\xADating.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The paper examines the causes of this rapid growth, and speculate about the underlying trends driving it.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"While the paper focuses on Intel x86 architecture and its recent extensions, the author doubt these trends are unique to Intel.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The paper espouses that these extensions are now approaching software-like levels of complexity, yet carry all the attendant drawbacks of a hardware implementation and the slow deployment cycle that implies.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"An \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Instruction_set_architecture\"\n  }), \"instruction set architecture (ISA)\"), \" is the key interface between the lowest-levels of software and the CPU.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/X86_instruction_listings\"\n  }), \"x86 ISA\"), \" is a complex but enduring set of semantics for in\\xADstructions, registers, memory, and core devices that must be respected by CPUs, emulators and virtual machines, and all the software that runs on top.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Like any successful product, successful ISAs grow over time.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"While new instructions add CPU implementation com\\xADplexity, past system designers could, for the most part, ignore such changes because they didn\\u2019t substan\\xADtially change systems interfaces or add too many instructions at a time.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Whereas past extensions largely focused on performance improvements through new data-processing instructions; Recent extensions introduce new system-level functionality, often change the semantics of existing instructions, and exhibit complex interactions with other extensions and prior ar\\xADchitectural features.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Such past extensions include:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Vector extensions (MMX, SSE, and AVX) \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"64-bit mode and virtualisation extensions\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"span\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"950px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/e66d1acca7abeabd9c7f3f3475256bff/b04cd/fig1.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"67.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACMElEQVQ4y3VUibKiMBDk/z9srVpL1+dRrs8LLxAQBLmP0DsdNz5rj6mKGZLQ6elptM7nM2azGaIoQt/3YPxvNqHkmWtF3aNqFVzHQdM0es+q6xplWepRFMVfQGZ0qkdWPF/ywhyHa4ZHeEN22aBpWyjV6XMWgZIkQZ7nIPg7kMlvcYk4rfB94cF2EnweIozWd/Sxi/S4RJoXL/aW7/vYbDa43W6oqupVkolHXuMqjOqmE+ACedmik/U6DtCc5yg7fa0mRAzrBaKULtsEAb59OBj/9HEO8jcBW6ApoKIT+ixElpca6Hg8YrfbwaJu2+0W3vWKrmtFDyWjw/Gawo1KRI8KVZahLxKopkLrfkJJbqL8rbvneRrUyuTwk1GLycoVNgXKWuroFdAKszJGFx7RZeICqeJLW/WU5PHQ2tMlGpAMK1m4B77cEgpAgp4j2KLP7/hXvDfNyOS6Lvb7PSxql4mgse+gYymtaCoWcIMEp4ujD55PJziXC9hAlvYeaZriInucCW69m7Wsapj+evYGP8ZjfEwmmM/nGA6HGMvzdDrVpVF344xWfPiyDX/ocm4mSaxvSeIYSegjFn+SVRiG2qvMgyDQepEVc9ollvNGihdDepE3m9y2Dzq3bRv8PBmcTcmU4iRS/BkWaze02SB2nXMjjeI6GZA1u8mce2RExuZdzvf7XWzXwRoMBro7LHm1WmE0GmmdmC8WC50vl0utGbXkOv9M1uu1roSD57jGS38B1c4vziDWdu0AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Figure 1\",\n    \"title\": \"Figure 1\",\n    \"src\": \"/static/e66d1acca7abeabd9c7f3f3475256bff/b04cd/fig1.png\",\n    \"srcSet\": [\"/static/e66d1acca7abeabd9c7f3f3475256bff/5243c/fig1.png 240w\", \"/static/e66d1acca7abeabd9c7f3f3475256bff/ab158/fig1.png 480w\", \"/static/e66d1acca7abeabd9c7f3f3475256bff/b04cd/fig1.png 950w\"],\n    \"sizes\": \"(max-width: 950px) 100vw, 950px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The figure above plots the transistor count of Intel x86 CPU implementations (on a log scale), as well as the number of words in the Intel architecture software developer\\u2019s manual (on a linear scale).\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The two data sets are not comparable, but some trends are evident:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Moore\\u2019s Law\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The steady growth, and recent 2015\\u20132016 jump in the general complexity of x86. The jump is due to extensions introduced with the \\u201CSky\\xADlake\\u201D microarchitecture, and dwarfs even 64-bit mode and virtual-machine extensions (both added in 2007).\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"It\\u2019s likely that the explosion in extensions is a deliberate strategy:\", mdx(\"blockquote\", {\n    parentName: \"li\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"The slowing pace of Moore\\u2019s Law will make it harder to sell CPUs: absent improvements in microarchitecture, they won\\u2019t be substantially faster, nor substantially more power e\\uFB03cient, and they will have about the same num\\xADber of cores at the same price point as prior CPUs. Why would anyone buy a new CPU? One reason to which In\\xADtel appears to be turning is features: if the new CPU im\\xADplements an important ISA extension\\u2014say, one required by software because it is essential to security\\u2014consumers will have a strong reason to upgrade.\")))), mdx(\"h3\", null, \"Case study: SGX\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The new instructions introduced by \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Software_Guard_Extensions\"\n  }), \"software guard exten\\xADsions\"), \" enable strong isolation and remote attestation of software enclaves.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"An enclave is an isolated region of virtual address space, whose contents are protected from access by code outside the enclave.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"However, SGX introduces substantial complexity: 26 instructions described by nearly 200 pages of En\\xADglish/pseudocode speci\\uFB01cation.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The paper goes on to describe the complexity introduced by SGX because of how some features are implemented and the decision to be compatible with existing OSes.\")), mdx(\"h3\", null, \"Case study: CET\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Control-flow_integrity\"\n  }), \"Control-\\uFB02ow enforcement technology\"), \" defends against code-reuse attacks such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Return-oriented_programming\"\n  }), \"return-oriented programming (ROP)\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"These attacks exploit vulnerabilities in unsafe code like bu\\uFB00er over\\uFB02ows, but rather than directly inject\\xADing executable code, manipulate the program\\u2019s control-\\xAD\\uFB02ow to execute legitimate instructions in an unintended context.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"CET consists of two mechanisms: a shadow stack, and indirect branch tracking:\"), mdx(\"blockquote\", {\n    parentName: \"li\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"At its core, a shadow stack is a straightforward mecha\\xADnism: on a function call, the processor saves the return ad\\xADdress on both the regular and shadow stacks. The shadow stack stores only return addresses, and is inaccessible to normal code.\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"On a return, the addresses from both stacks are popped and compared, and an exception raised if they di\\uFB00er, defeating ROP.\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"The advantage of CET compared to software implementations of shadow stacks is perfor\\xADmance, compatibility and security: by modifying the se\\xADmantics of CALL and RET instructions, no program mod-i\\uFB01cations are needed, and the shadow stack can be made easily and cheaply inaccessible to software through the use of a new page table attribute which protects shadow stacks from access by regular loads and stores.\")), mdx(\"blockquote\", {\n    parentName: \"li\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"CET also includes indirect branch tracking to prevent misdirection of function pointers: after an indirect JMP or CALL, an exception is raised unless the next instruction is a valid programmer-intended branch target, as signi\\uFB01ed by a new form of NOP instruction. While this is not full control-\\uFB02ow integrity \", \"[1]\", \", it restricts the available gadgets.\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Similarly, the paper describes how CET adds complexity because of the way it interacts/modifies existing instructions/features.\"))), mdx(\"h3\", null, \"Implications\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Sustainability\"), \": Given the rate of change + complexity, criticality of the x86 ISA, and particularly given the complex interactions between recent features, the paper questions whether the core x86 promise of inde\\uFB01nite backwards compatibility across many implementations is sustainable.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Timescales\"), \": Since they depend on deploying new CPUs, ISA features are slow to be adopted. Example: The original SGX speci\\uFB01cation was published in 2013, but the \\uFB01rst CPUs to implement it didn\\u2019t ship until late 2015, and at the time of writing \", \"[the paper]\", \" (early 2017) server-class CPUs with SGX support are yet to appear.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Hardware is the new software\"), \": From a careful reading of Intel patents, some researchers conclude that SGX instructions are implemented entirely in microcode. This is logical from an engineering per\\xADspective:\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"EPCM updates are o\\uFB00 the critical path\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Too complex to implement in silicon\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Allows errata to be cor\\xADrected by updates.\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"The paper posit an al\\xADternative future with the ultimate goal of decoupling new ISA features from the underlying hardware. Two strategies were proposed.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Security\"), \": A key selling point for many recent security features, SGX in particular, is that no software is trusted. Does the implementation of these features in microcode change this? We argue that microcode is more reliable than current software, but not as inherently secure as we might assume.\"))), mdx(\"h3\", null, \"Conclusion\"), mdx(\"p\", null, \"The paper calls for a rethink of how we approach the instruc\\xADtion set.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"It\\u2019s time to rethink the notion of an instruction set. It\\u2019s no longer the boundary between hardware and software, but rather just another translation layer in the stack.\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Today's summary is about a  paper  written by Andrew Baumann (Microsoft Research) in 2017. Moore’s Law may be slowing, but, perhaps as a…","timeToRead":4,"banner":{"childImageSharp":{"resize":{"src":"/static/91f2e2d8259bd31f3928488e855efd2d/a6c62/banner.jpg"}}}}},"pageContext":{"slug":"/2022-09-08-hardware-new-software","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["3090400250","3090400250","318001574"]}