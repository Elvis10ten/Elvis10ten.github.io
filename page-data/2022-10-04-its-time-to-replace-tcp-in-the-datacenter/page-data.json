{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/2022-10-04-its-time-to-replace-tcp-in-the-datacenter","result":{"data":{"post":{"__typename":"MdxPost","slug":"/2022-10-04-its-time-to-replace-tcp-in-the-datacenter","title":"It’s Time to Replace TCP in the Datacenter — Paper Summary","date":"04.10.2022","tags":[{"name":"summary","slug":"summary"},{"name":"paper","slug":"paper"},{"name":"networking","slug":"networking"},{"name":"distributedsystems","slug":"distributedsystems"}],"description":null,"canonicalUrl":"https://elvischidera.com/2022-10-04-its-time-to-replace-tcp-in-the-datacenter/","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"It’s Time to Replace TCP in the Datacenter — Paper Summary\",\n  \"slug\": \"/2022-10-04-its-time-to-replace-tcp-in-the-datacenter\",\n  \"date\": \"2022-10-04T00:00:00.000Z\",\n  \"canonicalUrl\": \"https://elvischidera.com/2022-10-04-its-time-to-replace-tcp-in-the-datacenter/\",\n  \"banner\": \"./assets/banner.jpeg\",\n  \"tags\": [\"summary\", \"paper\", \"networking\", \"distributedsystems\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Authors: John Ousterhout\"), mdx(\"p\", null, \"Date: 2022\"), mdx(\"p\", null, \"Link: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://arxiv.org/pdf/2210.00714.pdf\"\n  }), \"PDF\")), mdx(\"hr\", null), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Requirements for transport protocol used in data centers:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Reliable delivery\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Low latency\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"High throughput: Data throughput and message throughput.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Congestion control: This aids in low latency.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Efficient load balancing across server cores.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"NIC offload: In the future, transport protocols will need to move to special-purpose NIC hardware. The best software protocol implementations have end-to-end latency more than 3x as high as implementations where applications communicate directly with the NIC via kernel bypass.\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The following properties which represent most of the TCP design are the wrong decisions for a data center transport:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Stream orientation\"), \":\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When messages are serialized in a TCP stream, TCP does not know about message boundaries.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The fundamental problem with streaming is that the units in which data is received (ranges of bytes) do not correspond to dispatchable units of work (messages).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Messages have one disadvantage relative to streams: it is difficult to pipeline the implementation of a single large message.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Memcached load balances by dividing a collection of streams statically among threads. This approach is prone to hot spots, where one thread receives a disproportionate share of incoming requests.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"RAMCloud load balances by dedicating one thread to read all incoming messages from all streams and then dispatch messages to other threads for service. This allows better load balancing across worker threads, but the dispatcher thread becomes a throughput bottleneck and the need for each request to pass through two separate threads adds significant software overhead.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Connection orientation\"), \": \", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Connections result in overheads in space and/or time. For example, the Linux kernel keeps about 2000 bytes of state for each TCP socket, excluding packet buffers.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Another problem with connections is that they require a setup phase before any data can be transmitted.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"To reduce these overheads, application threads communicate through a collection of proxy threads that manage single connections to each server. This adds overhead in complexity and performance.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Bandwidth sharing\"), \":\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In TCP, when a host\\u2019s link is overloaded (either for incoming or outgoing traffic), TCP attempts to share the available bandwidth equally among the active connections.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When receiving several large messages, bandwidth sharing causes all of them to finish slowly.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Run-to-completion approaches provide better overall response time, but can\\u2019t be used since TCP doesn\\u2019t know message boundaries.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Sender-driven congestion control\"), \":\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"TCP drives congestion control from senders, which voluntarily slow their rate of packet transmission when they detect congestion.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"TCP congestion control is reactionary \\u2014 it takes about 1 RTT for a sender to find out about traffic changes.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"In-order packet delivery\"), \":\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"TCP assumes that packets will arrive at a receiver in the same order they were transmitted by the sender, and it assumes that out-of-order arrivals indicate packet drops.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In data center networks, the most effective way to perform load balancing is to perform packet spraying, where each packet is independently routed through the switching fabric to balance loads on links.\"))))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"TCP is beyond repair\"), \" \\u2014 there are simply too many problems, and they are too deeply embedded in the design of TCP.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Homa\"), \" is a clean-slate redesign of network transport for the data center that provides proof that all of TCP\\u2019s problems are solvable:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Homa is message-based\"), \": This enables run-to-completion scheduling; more efficient load balancing because multiple threads can safely read from a single socket and; a more powerful congestion signal.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Homa is connectionless\"), \": Despite its lack of connections, Homa ensures end-to-end reliability for RPCs.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Bandwidth sharing\"), \": Homa implements an SRPT scheduling policy to favor shorter messages.\", mdx(\"blockquote\", {\n    parentName: \"li\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Homa\\u2019s use of priority queues eliminates the \\u201Cpick your poison\\u201D tradeoff between latency and bandwidth. Homa intentionally allows some buffers from longer messages to accumulate in low-priority queues (over-commitment); these ensure high link utilization. Short messages still achieve low latency since they use higher priority queues.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Receiver-driven congestion control\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Out-of-order packets\"), \".\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Besides Homa, one of the best-known alternatives to TCP is Infiniband. However, it has some similar problems to TCP.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The best way to bring Homa into widespread usage is to integrate it with the RPC frameworks that underly most large-scale data center applications.\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Authors: John Ousterhout Date: 2022 Link:  PDF Requirements for transport protocol used in data centers: Reliable delivery Low latency High…","timeToRead":3,"banner":{"childImageSharp":{"resize":{"src":"/static/509bc3dadde2e24521f780e8762112a7/a6c62/banner.jpg"}}}}},"pageContext":{"slug":"/2022-10-04-its-time-to-replace-tcp-in-the-datacenter","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["3090400250","3090400250","318001574"]}